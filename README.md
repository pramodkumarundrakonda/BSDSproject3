# Java RMI Client-Server Application (Project 3)

This repository hosts a Java RMI (Remote Method Invocation) client-server application enhanced with replication and two-phase commit protocol. The application extends Project #2 by replicating the Key-Value Store Server across 5 distinct servers and implementing a two-phase protocol for updates to ensure consistency and availability.

## Table of Contents

- [Overview](#overview)
- [Features](#features)
- [Usage](#usage)
    - [Compilation](#compilation)
    - [Running the Servers](#running-the-servers)
    - [Running the Clients](#running-the-clients)
- [File Structure](#file-structure)
- [Dependencies](#dependencies)
- [Concurrency and Thread Safety](#concurrency-and-thread-safety)
- [Contributors](#contributors)


## Overview

The Java RMI Client-Server Application is enhanced with replication across 5 servers and a two-phase commit protocol. The servers handle client requests, maintain replicated key-value stores, and ensure consistency and availability using the two-phase commit protocol.

## Features

- **Replication**: The Key-Value Store Server is replicated across 5 distinct servers to increase server bandwidth and ensure availability.
- **Two-Phase Commit Protocol**: Implemented for updates (PUT and DELETE operations) to ensure consistency across replicated KV stores at each replica.
- **Java RMI Protocol**: Utilizes Java RMI for communication between clients and servers, enabling remote method invocation and coordination.
- **Concurrency and Thread Safety**: The application is designed to handle concurrent client requests, ensuring thread safety and data consistency.

## Usage

### Compilation

1. Ensure that you have the Java Development Kit (JDK) installed on your system.
2. Compile the source code using the provided Makefile or commands.
3. Navigate to the root directory where the Makefile is located.

   ```bash
   make all
   ```

### Running the Servers

### Running the Server

To run the server, execute the following command:

```bash
make run-server
```
The above command will start 1 Coordinator at 1099 port and 5 servers at 5 different ports like below
INFO  server.ServerLogger [INFO ] - Starting the server
INFO  server.ServerLogger [INFO ] - Participant: localhost 5001
INFO  server.ServerLogger [INFO ] - Participant: localhost 5002
INFO  server.ServerLogger [INFO ] - Participant: localhost 5003
INFO  server.ServerLogger [INFO ] - Participant: localhost 5004
INFO  server.ServerLogger [INFO ] - Participant: localhost 5005
INFO  server.ServerLogger [INFO ] - Servers ready

Ensure that all 5 servers are running and ready to accept client connections.

### Running the Clients

Launch the client application as follows:

```bash
make run-client ARGS="<client-id>"
```
for example:
if you want to start multiple instances of client, you can instantiate them like below:

```bash
make run-client ARGS="client1"
make run-client ARGS="client2"
make run-client ARGS="client3"
make run-client ARGS="client4"
make run-client ARGS="client5"
```
You can start as many clients as you want. If you update the KV store using one client on one of the
participants, you can view the updated changes using another client connected to another participant.

The client connects to one of the available participants automatically.

## File Structure

- **src/server**: Contains server-side Java source files for the RMI servers and coordinator implementation.
- **src/client**: Contains client-side Java source files for the RMI clients.
- **logs**: Directory for storing log files generated by the application.

## Dependencies

- Java RMI library for remote method invocation.
- Ensure that the necessary Java libraries are included in the classpath.

## Concurrency and Thread Safety

The application ensures thread safety and concurrency handling through mechanisms such as:
- Concurrent data structures (e.g., ConcurrentHashMap) for managing key-value stores.
- Synchronization locks (e.g., ReentrantLock) to protect critical sections of code during concurrent operations.
- Two-phase commit protocol for coordinating updates across replicated KV stores.

## Contributors

- Pramod Kumar Undrakonda
